<!doctype html>
<html>
<head><script src="butiran.js"></script></head>
<body>
<script>
/*
	abm_bioeconomy.html
	Simulation of bioeconomy based on ABM
	
	Sparisoma Viridi | dudung@gmail.command
	
	20180909
	Start this simulation project.
	20180911
	Add comments and make better code layout.
*/

// Temperature distribution
var temp = new DistDiscIntGaussian(20, 4, 
	{min: 0, max: 40, step: 1, N: 365}
);

var tatemp = document.createElement("textarea");
tatemp.style.height = "100px";
document.body.append(tatemp);
var N = 365;
var content = "# T\tpT\n";
for(var i = 0; i < N; i++) {
	var line = (i + 1) + "\t" + temp.getValue() + "\n";
	content += line;
}
tatemp.value = content;


// Precipitation distribution
var ipre = new DistDiscIntReciprocal(-3,
	{min: 0, max: 50, step: 1, N: 365}
);

var taipre = document.createElement("textarea");
taipre.style.height = "100px";
document.body.append(taipre);
var N = 365;
var content = "# I\tpI\n";
for(var i = 0; i < N; i++) {
	var line = (i + 1) + "\t" + ipre.getValue() + "\n";
	content += line;
}
taipre.value = content;

var tagrowtemp = document.createElement("textarea");
tagrowtemp.style.height = "100px";
document.body.append(tagrowtemp);
var N = 40;
var content = "# T\tGT\n";
var TL = 10;
var TO = 27;
var TH = 38;
var c2 = -0.0084;
for(var i = 0; i <= N; i++) {
	var line = i + "\t" + GrowTemp(i, TL, TO, TH, c2) + "\n";
	content += line;
}
tagrowtemp.value = content;

var tagrowwater = document.createElement("textarea");
tagrowwater.style.height = "100px";
document.body.append(tagrowwater);
var N = 50;
var content = "# H\tGH\n";
var HL = 20;
var HH = 40;
for(var i = 0; i <= N; i++) {
	var line = i + "\t" + GrowWater(i, HL, HH) + "\n";
	content += line;
}
tagrowwater.value = content;

var tasig = document.createElement("textarea");
tasig.style.height = "100px";
document.body.append(tasig);
var N = 50;
var content = "# t\tS\n";
var A = 1;
var b = 0.4;
var t0 = 15
for(var i = 0; i <= N; i++) {
	var line = i + "\t"
		+ Sigmoid(i, A, b, t0).toExponential(5) + "\n";
	content += line;
}
tasig.value = content;

var tadsig = document.createElement("textarea");
tadsig.style.height = "100px";
document.body.append(tadsig);
var N = 50;
var content = "# t\tDG0\n";
var A = 1;
var b = 0.4;
var t0 = 15
for(var i = 0; i <= N; i++) {
	var line = i + "\t"
		+ dSigmoid(i, A, b, t0).toExponential(5) + "\n";
	content += line;
}
tadsig.value = content;

var plantCF = new Plant(
	{TL: 10, TO: 27, TH: 38, c2: -0.0084},
	{HL: 20, HH: 40},
	{A: 1, b: 0.4, t0: 15},
	30, 10, 180, false, 2.4875
);

var plantOF = new Plant(
	{TL: 10, TO: 27, TH: 38, c2: -0.0084},
	{HL: 20, HH: 40},
	{A: 1, b: 0.4, t0: 15},
	30, 10, 180, true, 2.4875
);

var plantSF = new Plant(
	{TL: 10, TO: 27, TH: 38, c2: -0.0084},
	{HL: 20, HH: 40},
	{A: 1, b: 0.4, t0: 15},
	30, 10, 180, true, 2.4875
);

var plantSF2 = new Plant(
	{TL: 10, TO: 27, TH: 38, c2: -0.0084},
	{HL: 20, HH: 40},
	{A: 1, b: 0.4, t0: 15},
	30, 10, 180, false, 2.4875
);

var TO = 27;
var HH = 40;

var taplants = document.createElement("textarea");
document.body.append(taplants);
var content = "";
var tmin = 0;
var tmax = 365;
for(var t = tmin; t < tmax; t++) {
	var T = temp.getValue();
	var H = ipre.getValue() * 1;
	
	plantCF.grow(T, H, t);
	var aCF = plantCF.getAge();
	var sCF = plantCF.getSize();

	plantOF.grow(T, H, t);
	var aOF = plantOF.getAge();
	var sOF = plantOF.getSize();

	plantSF.grow(TO, HH, t);
	var aSF = plantSF.getAge();
	var sSF = plantSF.getSize();
	
	plantSF2.grow(TO, HH, t);
	var aSF2 = plantSF2.getAge();
	var sSF2 = plantSF2.getSize();
	
	var line = t + "\t"
		+ aCF + "\t" + sCF + "\t"
		+ aOF + "\t" + sOF + "\t"
		+ aSF + "\t" + sSF + "\t"
		+ aSF2 + "\t" + sSF2 + "\n";
	content += line;
}
taplants.value = content;

</script>
</body>
</html>